<!--index.wxml-->
<view class="container">
  <view class="userinfo">
    <button wx:if="{{!hasUserInfo && canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo">
      获取头像昵称
    </button>
    <block wx:else>
      <image wx:if="{{hasUserInfo}}" class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <text class="userinfo-nickname">{{hasUserInfo ? userInfo.nickName : '未登录'}}</text>
      <button wx:if="{{hasUserInfo}}" class="logout-btn" bindtap="logout">退出登录</button>
    </block>
  </view>

  
  <!-- 文章列表滚动模块 -->
  <view class="article-scroll-section">
    <!-- 已注释掉文章列表标题区域
    <view class="article-scroll-header">
      <view class="section-title">文章列表</view>
    </view>
    -->
    
    <!-- 滚动式文章列表 -->
    <scroll-view class="article-scroll-list" scroll-y enable-flex>
      <!-- 文章列表 -->
      <block wx:if="{{articleList.length > 0}}">
        <view wx:for="{{articleList}}" wx:key="id" class="article-item" bindtap="navigateToArticleDetail" data-id="{{item.id}}">
          <view class="article-content" style="margin-right: 0;">
            <text class="article-title">{{item.title}}</text>
            <text class="article-summary">{{item.summary}}</text>
            <view class="article-meta">
              <text class="article-author">{{item.author}}</text>
              <text class="article-time">{{item.publishTime}}</text>
              <text class="article-reads">{{item.readCount}} 阅读</text>
            </view>
          </view>
        </view>
      </block>
      
      <!-- 空状态 -->
      <view wx:elif="{{!isLoading}}" class="empty-state">
        <text class="empty-text">暂无文章数据</text>
      </view>
      
      <!-- 加载中 -->
      <view wx:if="{{isLoading && articleList.length === 0}}" class="loading-state">
        <view class="loading-spinner"></view>
        <text class="loading-text">加载中...</text>
      </view>
      
      <!-- 加载更多 -->
      <view wx:if="{{isLoading && articleList.length > 0}}" class="loading-more">
        <view class="loading-spinner-small"></view>
        <text class="loading-more-text">加载更多...</text>
      </view>
      
      <!-- 没有更多数据 -->
      <view wx:if="{{!hasMoreData && articleList.length > 0}}" class="no-more-data">
        <text class="no-more-text">没有更多了</text>
      </view>
    </scroll-view>
  </view>

  <!-- 底部信息 -->
  <view class="footer">
    <text class="footer-text">© 2023 文章阅读小程序</text>
  </view>
</view>